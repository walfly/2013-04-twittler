<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script src="jquery.timeago.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="styles.css">
  </head>
  <body>
    <ul class="navigationbar"><div class="backgrounds"><li class="all">all</li></div></ul>
    <div class="mainbody"></div>
    <script>
      $(document).ready(function(){
        $('abbr.timeago').timeago();
        for (key in streams.users){
          var $users = $('<li></li>');
          $users.text(key);
          $users.addClass(key)
          $users.appendTo($('.navigationbar div'))
        }
        $('.backgrounds').on("click", "li", function(){
          var whichButton = $(this).text();
          var $body = $('.mainbody');
          $body.html('');
          if (whichButton === 'all'){
            var index = streams.home.length - 1;
            while(index >= 0){
              var tweet = streams.home[index];
              var $tweet = $('<div></div>');
              $tweet.text(jQuery.timeago(tweet.created_at)+ ': @' + tweet.user + ': ' + tweet.message);
              $tweet.appendTo($body);
              index -= 1;
            }
          } else {
            var index2 = streams.users[whichButton].length - 1;
            while(index2 >= 0){
              var tweet2 = streams.users[whichButton][index2];
              var $tweet2 = $('<div></div>');
              $tweet2.text(jQuery.timeago(tweet2.created_at) + ': @' + tweet2.user + ': ' + tweet2.message);
              $tweet2.appendTo($body);
              index2 -= 1;
            }
          }
        });

      });
    </script>
  </body>
</html>
